// Bun Snapshot v1, https://bun.sh/docs/test/snapshots

exports[`Integration: Full pipeline should generate complete TypeScript types from database 1`] = `
"import type { ColumnType } from 'kysely';

export type Generated<T> = T extends ColumnType<infer S, infer I, infer U>
  ? ColumnType<S, I | undefined, U>
  : ColumnType<T, T | undefined, T>;

export type ArrayType<T> = ArrayTypeImpl<T> extends (infer U)[]
  ? U[]
  : ArrayTypeImpl<T>;

export type ArrayTypeImpl<T> = T extends ColumnType<infer S, infer I, infer U>
  ? ColumnType<S[], I[], U[]>
  : T[];

export type JsonPrimitive = string | number | boolean | null;

export type JsonArray = JsonValue[];

export type JsonObject = { [key: string]: JsonValue };

export type JsonValue = JsonPrimitive | JsonObject | JsonArray;

export type StatusEnum = 'pending' | 'approved' | 'rejected';

export type Timestamp = ColumnType<Date, Date | string, Date | string>;

export type Int8 = ColumnType<string, string | number | bigint, string | number | bigint>;

export type Numeric = ColumnType<string, number | string, number | string>;

export interface CheckConstraintsTest {
  id: Generated<number>;
  status: 'pending' | 'active' | 'completed';
  'type': 'proxy' | 'redirect' | null;
  priority: 1 | 2 | 3 | 4 | 5 | null;
  level: 'low' | 'medium' | 'high' | null;
  range_col: number | null;
  regex_col: string | null;
}

export interface Comments {
  id: Generated<number>;
  post_id: number;
  user_id: number;
  content: string;
  status: Generated<StatusEnum>;
  created_at: Generated<Timestamp>;
}

export interface DomainCheckTest {
  id: Generated<number>;
  status: 'draft' | 'published' | 'archived';
}

export interface Measurements {
  id: Generated<number>;
  measure_date: Timestamp;
  value: Numeric;
  sensor_id: number;
}

export interface Posts {
  id: Generated<number>;
  user_id: number;
  title: string;
  content: string | null;
  published_at: Timestamp | null;
  view_count: Generated<number>;
}

export interface Users {
  id: Generated<number>;
  email: string;
  username: string;
  created_at: Generated<Timestamp>;
  updated_at: Timestamp | null;
  is_active: Generated<boolean>;
  metadata: JsonValue | null;
  tags: Generated<string[] | null>;
  scores: number[] | null;
}

export interface ActiveUsers {
  id: number | null;
  email: string | null;
  username: string | null;
  created_at: Timestamp | null;
}

export interface UserStats {
  id: number | null;
  username: string | null;
  post_count: Int8 | null;
  comment_count: Int8 | null;
}

export interface UserTagsView {
  id: number | null;
  username: string | null;
  tags: string[] | null;
}

export interface DB {
  check_constraints_test: CheckConstraintsTest;
  comments: Comments;
  domain_check_test: DomainCheckTest;
  measurements: Measurements;
  posts: Posts;
  users: Users;
  active_users: ActiveUsers;
  user_stats: UserStats;
  user_tags_view: UserTagsView;
}
"
`;

exports[`Integration: Full pipeline should generate Zod schemas from database 1`] = `
"import { z } from 'zod';

export const statusEnumSchema = z.enum(['pending', 'approved', 'rejected']);

export const checkConstraintsTestSchema = z.object({
  id: z.number(),
  status: z.enum(['pending', 'active', 'completed']),
  'type': z.enum(['proxy', 'redirect']).nullable(),
  priority: z.union([z.literal(1), z.literal(2), z.literal(3), z.literal(4), z.literal(5)]).nullable(),
  level: z.enum(['low', 'medium', 'high']).nullable(),
  range_col: z.number().nullable(),
  regex_col: z.string().nullable(),
});

export const newCheckConstraintsTestSchema = z.object({
  id: z.number().optional(),
  status: z.enum(['pending', 'active', 'completed']),
  'type': z.enum(['proxy', 'redirect']).nullable(),
  priority: z.union([z.literal(1), z.literal(2), z.literal(3), z.literal(4), z.literal(5)]).nullable(),
  level: z.enum(['low', 'medium', 'high']).nullable(),
  range_col: z.number().nullable(),
  regex_col: z.string().nullable(),
});

export const checkConstraintsTestUpdateSchema = z.object({
  id: z.number().optional(),
  status: z.enum(['pending', 'active', 'completed']).optional(),
  'type': z.enum(['proxy', 'redirect']).nullable().optional(),
  priority: z.union([z.literal(1), z.literal(2), z.literal(3), z.literal(4), z.literal(5)]).nullable().optional(),
  level: z.enum(['low', 'medium', 'high']).nullable().optional(),
  range_col: z.number().nullable().optional(),
  regex_col: z.string().nullable().optional(),
});

export type CheckConstraintsTest = z.infer<typeof checkConstraintsTestSchema>;

export type NewCheckConstraintsTest = z.infer<typeof newCheckConstraintsTestSchema>;

export type CheckConstraintsTestUpdate = z.infer<typeof checkConstraintsTestUpdateSchema>;

export const commentsSchema = z.object({
  id: z.number(),
  post_id: z.number(),
  user_id: z.number(),
  content: z.string(),
  status: statusEnumSchema,
  created_at: z.date(),
});

export const newCommentsSchema = z.object({
  id: z.number().optional(),
  post_id: z.number(),
  user_id: z.number(),
  content: z.string(),
  status: statusEnumSchema.optional(),
  created_at: z.union([z.date(), z.string()]).optional(),
});

export const commentsUpdateSchema = z.object({
  id: z.number().optional(),
  post_id: z.number().optional(),
  user_id: z.number().optional(),
  content: z.string().optional(),
  status: statusEnumSchema.optional(),
  created_at: z.union([z.date(), z.string()]).optional(),
});

export type Comments = z.infer<typeof commentsSchema>;

export type NewComments = z.infer<typeof newCommentsSchema>;

export type CommentsUpdate = z.infer<typeof commentsUpdateSchema>;

export const domainCheckTestSchema = z.object({
  id: z.number(),
  status: z.enum(['draft', 'published', 'archived']),
});

export const newDomainCheckTestSchema = z.object({
  id: z.number().optional(),
  status: z.enum(['draft', 'published', 'archived']),
});

export const domainCheckTestUpdateSchema = z.object({
  id: z.number().optional(),
  status: z.enum(['draft', 'published', 'archived']).optional(),
});

export type DomainCheckTest = z.infer<typeof domainCheckTestSchema>;

export type NewDomainCheckTest = z.infer<typeof newDomainCheckTestSchema>;

export type DomainCheckTestUpdate = z.infer<typeof domainCheckTestUpdateSchema>;

export const measurementsSchema = z.object({
  id: z.number(),
  measure_date: z.date(),
  value: z.string(),
  sensor_id: z.number(),
});

export const newMeasurementsSchema = z.object({
  id: z.number().optional(),
  measure_date: z.union([z.date(), z.string()]),
  value: z.union([z.string(), z.number()]),
  sensor_id: z.number(),
});

export const measurementsUpdateSchema = z.object({
  id: z.number().optional(),
  measure_date: z.union([z.date(), z.string()]).optional(),
  value: z.union([z.string(), z.number()]).optional(),
  sensor_id: z.number().optional(),
});

export type Measurements = z.infer<typeof measurementsSchema>;

export type NewMeasurements = z.infer<typeof newMeasurementsSchema>;

export type MeasurementsUpdate = z.infer<typeof measurementsUpdateSchema>;

export const measurements2024Q1Schema = z.object({
  id: z.number(),
  measure_date: z.date(),
  value: z.string(),
  sensor_id: z.number(),
});

export const newMeasurements2024Q1Schema = z.object({
  id: z.number().optional(),
  measure_date: z.union([z.date(), z.string()]),
  value: z.union([z.string(), z.number()]),
  sensor_id: z.number(),
});

export const measurements2024Q1UpdateSchema = z.object({
  id: z.number().optional(),
  measure_date: z.union([z.date(), z.string()]).optional(),
  value: z.union([z.string(), z.number()]).optional(),
  sensor_id: z.number().optional(),
});

export type Measurements2024Q1 = z.infer<typeof measurements2024Q1Schema>;

export type NewMeasurements2024Q1 = z.infer<typeof newMeasurements2024Q1Schema>;

export type Measurements2024Q1Update = z.infer<typeof measurements2024Q1UpdateSchema>;

export const measurements2024Q2Schema = z.object({
  id: z.number(),
  measure_date: z.date(),
  value: z.string(),
  sensor_id: z.number(),
});

export const newMeasurements2024Q2Schema = z.object({
  id: z.number().optional(),
  measure_date: z.union([z.date(), z.string()]),
  value: z.union([z.string(), z.number()]),
  sensor_id: z.number(),
});

export const measurements2024Q2UpdateSchema = z.object({
  id: z.number().optional(),
  measure_date: z.union([z.date(), z.string()]).optional(),
  value: z.union([z.string(), z.number()]).optional(),
  sensor_id: z.number().optional(),
});

export type Measurements2024Q2 = z.infer<typeof measurements2024Q2Schema>;

export type NewMeasurements2024Q2 = z.infer<typeof newMeasurements2024Q2Schema>;

export type Measurements2024Q2Update = z.infer<typeof measurements2024Q2UpdateSchema>;

export const postsSchema = z.object({
  id: z.number(),
  user_id: z.number(),
  title: z.string(),
  content: z.string().nullable(),
  published_at: z.date().nullable(),
  view_count: z.number(),
});

export const newPostsSchema = z.object({
  id: z.number().optional(),
  user_id: z.number(),
  title: z.string(),
  content: z.string().nullable(),
  published_at: z.union([z.date(), z.string()]).nullable(),
  view_count: z.number().optional(),
});

export const postsUpdateSchema = z.object({
  id: z.number().optional(),
  user_id: z.number().optional(),
  title: z.string().optional(),
  content: z.string().nullable().optional(),
  published_at: z.union([z.date(), z.string()]).nullable().optional(),
  view_count: z.number().optional(),
});

export type Posts = z.infer<typeof postsSchema>;

export type NewPosts = z.infer<typeof newPostsSchema>;

export type PostsUpdate = z.infer<typeof postsUpdateSchema>;

export const usersSchema = z.object({
  id: z.number(),
  email: z.string(),
  username: z.string(),
  created_at: z.date(),
  updated_at: z.date().nullable(),
  is_active: z.boolean(),
  metadata: z.unknown().nullable(),
  tags: z.array(z.string()).nullable(),
  scores: z.array(z.number()).nullable(),
});

export const newUsersSchema = z.object({
  id: z.number().optional(),
  email: z.string(),
  username: z.string(),
  created_at: z.union([z.date(), z.string()]).optional(),
  updated_at: z.union([z.date(), z.string()]).nullable(),
  is_active: z.boolean().optional(),
  metadata: z.unknown().nullable(),
  tags: z.array(z.string()).nullable().optional(),
  scores: z.array(z.number()).nullable(),
});

export const usersUpdateSchema = z.object({
  id: z.number().optional(),
  email: z.string().optional(),
  username: z.string().optional(),
  created_at: z.union([z.date(), z.string()]).optional(),
  updated_at: z.union([z.date(), z.string()]).nullable().optional(),
  is_active: z.boolean().optional(),
  metadata: z.unknown().nullable().optional(),
  tags: z.array(z.string()).nullable().optional(),
  scores: z.array(z.number()).nullable().optional(),
});

export type Users = z.infer<typeof usersSchema>;

export type NewUsers = z.infer<typeof newUsersSchema>;

export type UsersUpdate = z.infer<typeof usersUpdateSchema>;

export const activeUsersSchema = z.object({
  id: z.number().nullable(),
  email: z.string().nullable(),
  username: z.string().nullable(),
  created_at: z.date().nullable(),
});

export const newActiveUsersSchema = z.object({
  id: z.number().nullable(),
  email: z.string().nullable(),
  username: z.string().nullable(),
  created_at: z.union([z.date(), z.string()]).nullable(),
});

export const activeUsersUpdateSchema = z.object({
  id: z.number().nullable().optional(),
  email: z.string().nullable().optional(),
  username: z.string().nullable().optional(),
  created_at: z.union([z.date(), z.string()]).nullable().optional(),
});

export type ActiveUsers = z.infer<typeof activeUsersSchema>;

export type NewActiveUsers = z.infer<typeof newActiveUsersSchema>;

export type ActiveUsersUpdate = z.infer<typeof activeUsersUpdateSchema>;

export const userStatsSchema = z.object({
  id: z.number().nullable(),
  username: z.string().nullable(),
  post_count: z.string().nullable(),
  comment_count: z.string().nullable(),
});

export const newUserStatsSchema = z.object({
  id: z.number().nullable(),
  username: z.string().nullable(),
  post_count: z.union([z.string(), z.number(), z.bigint()]).nullable(),
  comment_count: z.union([z.string(), z.number(), z.bigint()]).nullable(),
});

export const userStatsUpdateSchema = z.object({
  id: z.number().nullable().optional(),
  username: z.string().nullable().optional(),
  post_count: z.union([z.string(), z.number(), z.bigint()]).nullable().optional(),
  comment_count: z.union([z.string(), z.number(), z.bigint()]).nullable().optional(),
});

export type UserStats = z.infer<typeof userStatsSchema>;

export type NewUserStats = z.infer<typeof newUserStatsSchema>;

export type UserStatsUpdate = z.infer<typeof userStatsUpdateSchema>;

export const userTagsViewSchema = z.object({
  id: z.number().nullable(),
  username: z.string().nullable(),
  tags: z.array(z.string()).nullable(),
});

export const newUserTagsViewSchema = z.object({
  id: z.number().nullable(),
  username: z.string().nullable(),
  tags: z.array(z.string()).nullable(),
});

export const userTagsViewUpdateSchema = z.object({
  id: z.number().nullable().optional(),
  username: z.string().nullable().optional(),
  tags: z.array(z.string()).nullable().optional(),
});

export type UserTagsView = z.infer<typeof userTagsViewSchema>;

export type NewUserTagsView = z.infer<typeof newUserTagsViewSchema>;

export type UserTagsViewUpdate = z.infer<typeof userTagsViewUpdateSchema>;
"
`;
